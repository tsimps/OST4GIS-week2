<!DOCTYPE html>
<html>
  <head>
    <script src="health_centers_csv.js"></script>
  </head>
  <body>
    <!--left panel-->
    <div style="position:fixed;left:0px;width:400px">
    </div>
    <!--map-->
    <div id="map" style="position:fixed;right:0px;left:400px;height:100%;">
    </div>

    <!--javascript-->
    <script>
      /* =====================

      # Lab 2, Part 5 â€” Convert JSON to CSV

      ## Introduction

      Creating this week's homework assignment, it was necessary to convert the data stored in
      healthCentersCSV from its native format (CSV)to JSON. This is a difficult task partially because
      it is hard to think about all of the edge cases you might encounter and partially because
      datasets are so rarely 'clean'.

      Try your hand at a simplified version of this task:
      For each row in the CSV, console.log an array with all columns separated into different fields.

      For example, given the row "I'm,a,little,teapot", you will print out ["I'm", "a", "little", "teapot"].

      ===================== */

      /* =====================

      Start code

      ===================== */

      //console.log(healthCentersCSV)

      // initatilize variables
      var place = 0;
      var smallArray = [];
      var bigArray = [];
      var arrayLine = 0;
      var char = "";
      var word = "";

      // loop through the json object
      for (var i = 0; i < healthCentersCSV.length; i++) {

        char = healthCentersCSV[i];
        //console.log("evaluating: " + healthCentersCSV[i])

        if (char === ",") {
          word = ""; //reset the word
          place = place + 1;

          //console.log("found a comma")
        }

        // when the row breaks, we want to: reset the word, copy the small array
        // to the bigger array,

        else if (char === ";") {
          word = ""; // reset the holder of the words
          place = 0; // reset the place holder of small array

          bigArray[arrayLine] = smallArray; // copy the small array into bigger

          smallArray = []; //reset the small array
          arrayLine++; // increment arrayLine

          //console.log(smallArray);
          //console.log("found a semi colon")
        }

        // if there is just a char, add the char to stored word and update the small array
        else {
          word = word + char;
          smallArray[place] = word;

          //console.log(word);
        }

        //console.log(array[row][column])
      }

      console.log(bigArray)

      /* =====================

      End code

      ===================== */
    </script>
  </body>
</html>
